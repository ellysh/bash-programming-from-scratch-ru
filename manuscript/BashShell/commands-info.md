## Информация о командах

Мы познакомились с командами навигации по файловой системе. Для каждой команды мы рассмотрели только часто используемые опции и параметры. Что делать, если вам нужны дополнительные функции?

Все современные ОС и программы имеют встроенную документацию. Она редко бывает нужна благодаря наглядности графического интерфейса. Назначение иконок или кнопок обычно очевидно. Поэтому большинство пользователей документацией не пользуется.

При работе с интерфейсом командной строки режимы работы программ неочевидны. Но знать их надо, поскольку небрежность может привести к потере ваших данных.

Разработчики Unix сначала распространяли документацию в бумажном виде. Но это было неудобно. Объём информации быстро рос и скоро превысил размер одной книги. Чтобы сделать документацию доступнее, была разработана система man. Она предоставляет справку по любой установленной программе.

Система man — это центральное место для доступа к документации. Кроме этого каждая программа в Unix предоставляет краткую информацию о себе. Так например, у интерпретатора Bash есть своя система справки help. Рассмотрим её подробнее.

Чтобы вывести список встроенных команд Bash, выполните команду help без параметров. Иллюстрация 2-21 демонстрирует результат.

{caption: "Иллюстрация 2-21. Результат выполнения команды `help`", height: "50%"}
![Результат help](images/BashShell/bash-help.png)

Перед вами команды, которые Bash исполняет самостоятельно. Если команды нет в списке, она выполняется GNU-утилитой или сторонней программой.

Например, команда cd есть в списке help. Это значит, что Bash выполнит её самостоятельно. Теперь предположим, что вы ввели команду find. Её в списке help нет. Поэтому Bash вызовет утилиту с именем find и передаст ей указанные вами параметры. Если найти find на жёстком диске не удалось, Bash сообщит об ошибке.

Где Bash ищет утилиты для выполнения команд? У него есть список системных путей, по которым устанавливаются программы. Этот список хранится в **переменной окружения** с именем `PATH`.

[**Переменная**](https://ru.wikipedia.org/wiki/Переменная_(программирование)) — это область оперативной памяти. Обычно для обращения к области памяти нужно указать её адрес. Но переменная позволяет заменить адрес на имя. Обратившись по имени переменной, вы можете записать или прочитать её область памяти. С переменными окружения мы познакомимся в следующей главе.

I> Чтобы вывести доступные переменные окружения, вызовите утилиту env без параметров.

Представьте переменную как некоторое значение, у которого есть имя. Например, можно сказать: "время — 12 часов". В этом случае "время" — это имя переменной, а "12 часов" — её значение. Значение хранится в памяти компьютера.

Теперь допустим, что вы читаете переменную из памяти. Для этого вы сообщаете компьютеру её имя "время". Компьютер преобразует имя в адрес памяти. Он читает память, находит в ней значение "12 часов" и выдаёт его вам. Запись переменной происходит аналогично.

Команда echo выводит на экран не только строки, но и значения переменных. Например, следующая команда напечатает, чему равна переменная `PATH`:
{line-numbers: false, format: Bash}
```
echo "$PATH"
```

Зачем нам понадобился знак доллара $ перед именем переменной? Команда echo получает через входные параметры строки и выводит их на экран. Например, следующий вызов echo напечатает текст "123":
{line-numbers: false, format: Bash}
```
echo 123
```

Знак доллара $ перед словом сообщает Bash, что это имя переменной. Когда Bash встречает знак доллара, он ищет следующее за ним слово в своём списке переменных. Если поиск удался, Bash заменяет имя на значение переменной. В противном случае имя заменяется на пустую строку.

I> Заключать имена переменных в двойные кавычки " считается [хорошей практикой](https://www.tldp.org/LDP/abs/html/quotingvar.html). Это предотвращает потенциальные ошибки. Представьте, что Bash подставляет значение переменной вместо её имени. Если в значении встречаются [**управляющие символы**](https://ru.wikipedia.org/wiki/Управляющие_символы), интерпретатор их обработает. В результате подставленное значение будет отличаться от хранящегося в памяти. Это может привести к некорректному поведению программы.

Вернёмся к команде echo для вывода переменной `PATH`. Иллюстрация 2-22 демонстрирует результат её исполнения.

{caption: "Иллюстрация 2-22. Значение переменной `PATH`", height: "30%", width: "100%"}
![Значение PATH](images/BashShell/echo-path.png)

Что означает этот вывод? Перед нами список путей, разделённых двоеточиями. Если записать каждый путь с новой строки, получим следующее:
{line-numbers: false}
```
/usr/local/bin
/usr/bin
/bin
/opt/bin
/c/Windows/System32
/c/Windows
/c/Windows/System32/Wbem
/c/Windows/System32/WindowsPowerShell/v1.0/
```

Формат переменной `PATH` вызывает вопросы. Почему нельзя хранить пути в виде списка с [переводом строки](https://ru.wikipedia.org/wiki/Перевод_строки) вместо двоеточия? Тогда при выводе переменной на экран, её было бы удобнее читать. Короткий ответ: так проще программировать. Интерпретатор и некоторые GNU-утилиты обрабатывают символ перевода строки `\n` по-разному. Это может стать источником ошибок.

Если вы ищете утилиту или программу на диске, переменная `PATH` подскажет, где искать. Кроме того не забывайте про утилиту для поиска find. Например, найдём её исполняемый файл такой командой:
{line-numbers: false, format: Bash}
```
find / -name find
```

Файл с именем `find` находится в каталогах `/bin` и `/usr/bin`.

Найти программу на диске можно быстрее. Для этого у Bash есть встроенная команда type. Передайте в неё имя интересующей вас программы. Команда type выведет абсолютный путь до её исполняемого файла как на иллюстрации 2-23.

{caption: "Иллюстрация 2-23. Результат выполнения команды `type`", height: "30%"}
![Результат type](images/BashShell/type-command.png)

Из иллюстрации 2-23 мы узнали, что исполняемые файлы утилит find и ls находятся в каталоге `/usr/bin`. Причём путь до утилиты ls **хэшируется**. Bash запоминает его и не ищет исполняемый файл ls при каждом вызове. Поэтому если перенести файл ls в другое место на диске, Bash его не найдёт.

В type можно передать встроенную команду интерпретатора. Тогда type сообщит, что оболочка исполняет эту команду самостоятельно. На иллюстрации 2-23 приведён пример для команды pwd.

Мы нашли исполняемый файл нужной утилиты. Как теперь узнать, какие входные параметры она принимает? Для вывода краткой справки вызовите утилиту с опцией `--help`. Вы получите вывод как на иллюстрации 2-24. Это краткая справка об утилите cat.

{caption: "Иллюстрация 2-24. Краткая справка об утилите cat", height: "50%"}
![Справка cat](images/BashShell/cat-help.png)

Если язык вашей системы английский, справочная информация выводится на нём. Перевод справки на русский доступен в [интернете](https://www.opennet.ru/man.shtml?topic=cat&russian=0&category=&submit=%F0%CF%CB%C1%DA%C1%D4%D8+man). Онлайн переводчик [Google Translate](https://translate.google.com) или [DeepL](https://www.deepl.com/translator) поможет перевести незнакомые английские слова. Если вы используйте Linux или macOS, переключите язык системы на русский. После этого документация станет на русском.

Если краткой справки недостаточно, обратитесь к системе документации info. Предположим, вы ищете примеры использования cat. Их выведет следующая команда:
{line-numbers: false, format: Bash}
```
info cat
```

Иллюстрация 2-25 демонстрирует результат команды info.

{caption: "Иллюстрация 2-25. Справка info по утилите `cat`", height: "50%"}
![Справка info по `cat`](images/BashShell/cat-info.png)

Перед вами программа для чтения текстовых документов. Клавиши-стрелки либо PageUp и PageDown прокручивают текст вверх и вниз. Клавиша Q завершает программу.

Систему документацию info создали разработчики GNU-утилит. До неё все версии Unix использовали man. Возможности info и man похожи. В MSYS2 по умолчанию устанавливается современная система info.

В вашем Linux-дистрибутиве может быть установлена система man. Она выводит информацию так же, как info. Вот пример вызова справки для утилиты cat:
{line-numbers: false, format: Bash}
```
man cat
```

Когда имя нужной утилиты известно, о ней легко получить справку. Но что делать, если вы не знаете, какая утилита решает вашу задачу? Лучше искать ответ на этот вопрос в интернете. Советы по использованию командной строки лаконичнее инструкций для программ с графическим интерфейсом. Вам не нужны скриншоты и видеоролики с объяснениями каждого действия. Вместо этого достаточно одной строчки с командой, которая сделает всё необходимое.

{caption: "Упражнение 2-5. Система документации", format: text, line-numbers: false}
```
Найдите информацию по каждой встроенной команде и утилите из таблицы 2-1.
Изучите параметры утилит ls и find, которые мы не рассмотрели.
```
