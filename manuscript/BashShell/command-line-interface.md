## Командный интерпретатор

Интерпретаторы работают в двух режимах: не интерактивном и интерактивном. В первом режиме интерпретатор исполняет программу. Программа загружается с диска в оперативную память. Затем она построчно исполняется.

В интерактивном режиме пользователь вводит команды в [окне эмулятора терминала](https://ru.wikibooks.org/wiki/Введение_в_администрирование_UNIX/Командная_строка_UNIX#Терминал_и_командная_строка). После нажатия клавиши Enter, команда исполняется. Интерпретатор с интерактивным режимом работы называется [**командной оболочкой**](https://ru.wikipedia.org/wiki/Интерпретатор_командной_строки) (shell).

Командная оболочка часто встраивается в ОС. Она предоставляет доступ к настройкам и функциям ОС. В Linux через оболочку запускаются программы и системные сервисы, управляются периферийные и внутренние устройства, происходят обращения к ядру ОС.

### Востребованность

Зачем сегодня изучать интерфейс командной строки (CLI)? Его создавали 40 лет назад для компьютеров, которые в тысячи раз медленнее современных. На ПК и ноутбуках давно доминирует графический интерфейс.

Кажется, что CLI — устаревшая технология, давно отжившая свой век. Это утверждение ошибочно. Не просто так Bash входит во все [дистрибутивы](https://ru.wikipedia.org/wiki/Дистрибутив_операционной_системы) macOS и Linux. В Windows тоже есть командный интерпретатор [Cmd.exe](https://ru.wikipedia.org/wiki/Cmd.exe). В 2006 году компания Microsoft заменила его на новый [PowerShell](https://ru.wikipedia.org/wiki/PowerShell). Задумайтесь над этим фактом. Разработчик самой популярной ОС для ПК создаёт новую командную оболочку. Значит, польза от CLI всё-таки есть.

Какие задачи решает командная оболочка в современных ОС? Прежде всего это инструмент для [администрирования системы](https://ru.wikipedia.org/wiki/Системный_администратор). В состав ОС кроме ядра входят программные модули: библиотеки, сервисы и утилиты. У них есть настройки и специальные режимы работы. Большинство настроек и режимов не нужны рядовому пользователю. Это дополнительные возможности. Поэтому графический интерфейс не даёт к ним доступа.

Если ОС выходит из строя, дополнительные возможности нужны для её восстановления. Кроме того при сбое системы графический интерфейс часто не работает. Поэтому все утилиты восстановления имеют интерфейс командной строки.

I> Интерпретатор Bash интегрирован в Linux и macOS. Через него доступны функции этих ОС. С Windows Bash не работает. Вместо него Microsoft предлагает свою оболочку PowerShell. В этой книге мы изучаем Bash. Во-первых, он совместим со стандартом POSIX. Во-вторых, Bash встречается чаще чем PowerShell и доступен на всех современных ОС.

Кроме задач администрирования командный интерфейс нужен для [подключения к компьютерам по сети](https://ru.wikipedia.org/wiki/Программы_удалённого_администрирования). Для такого подключения есть графические программы: TeamViewer, Remote Desktop и другие. Но они требуют стабильного и быстрого сетевого соединения. Если соединение ненадёжное, эти программы работают медленно и связь постоянно теряется. Командный интерфейс не требователен к качеству соединения. Даже с медленным каналом связи удалённый компьютер получит и исполнит команду.

Знание командного интерфейса полезно не только администраторам, но и рядовым пользователям. С командной оболочкой намного быстрее выполнять ежедневные задачи. Например, следующие:

* Операции над файлами и каталогами.
* Создание резервных копий данных.
* Загрузка файлов из интернета.
* Сбор статистики об использовании ресурсов компьютера.

Рассмотрим пример. Предположим, вы переименовываете файлы на диске. К их именам добавляется один и тот же суффикс. Для десятка файлов это легко сделать через графическое приложение [Проводник Windows](https://ru.wikipedia.org/wiki/Проводник_Windows). Но допустим, что файлов несколько тысяч. Тогда работа через Проводник займёт целый день. С помощью оболочки эта задача решается одной командой за пару секунд.

Пример с переименованием файлов показал сильную сторону CLI — [масштабируемость](https://wiki.monavista.ru/Масштабируемость). Масштабируемость в общем смысле означает, что одно и то же решение одинаково хорошо справляется с большим и малым объёмом входных данных. В случае командной оболочки решение — это команда. Она одинаково быстро обрабатывает десять файлов и тысячу.

Знание командного интерфейса пригодится программисту. Разрабатывая сложное приложение, приходится изменять много файлов с исходным кодом. Для работы с ними есть редакторы с графическим интерфейсом. Но иногда одно и то же изменение надо внести в несколько файлов. Например, изменить заголовок с информацией о лицензии. В этом случае работа с редактором неэффективна. Утилиты командной строки решат эту задачу намного быстрее.

Навыки работы с CLI нужны для запуска компиляторов и интерпретаторов. Эти программы, как правило, не имеют графического интерфейса. Они запускаются через командную строку. На вход они принимают имена файлов с исходным кодом. Файлов может быть много, поэтому графический интерфейс плохо подходит для их обработки.

[**Интегрированные среды разработки**](https://ru.wikipedia.org/wiki/Интегрированная_среда_разработки) (integrated development environment или IDE) компилируют программы через графический интерфейс. На самом деле IDE — это только обёртка над командным интерфейсом компилятора. Он вызывается, когда вы нажимаете кнопку в IDE. Чтобы изменить режим работы компилятора в этом случае, придётся столкнуться с интерфейсом командной строки.

Если вы опытный программист, командная строка поможет вам разработать вспомогательные утилиты. Дело в том, что приложение с текстовым интерфейсом быстрее и проще писать чем аналогичное с GUI. Скорость разработки важна, когда решаются одноразовые задачи.

Допустим, у вас появилась задача. Она решается многократным повторением одного и того же действия. В этом случае посчитайте: сколько времени нужно на ручную работу и сколько на написание утилиты для автоматизации. Писать утилиту с графическим интерфейсом долго. Решить задачу вручную окажется быстрее. Но если выбрать командный интерфейс, автоматизировать задачу станет выгоднее. Так вы сэкономите время и исключите ошибки из-за ручной работы.

Стоит ли изучать интерфейс командной строки, решать вам. Я только привёл примеры из практики, которые говорят о пользе этого навыка. Перейти с графического интерфейса на командную строку тяжело. Придётся заново научиться многим вещам, которые вы привыкли делать через Проводник Windows. Но освоившись с командной оболочкой, вы удивитесь насколько продуктивнее стала ваша работа на компьютере.