# Пакетный менеджер

Мы познакомились со встроенными возможностями Bash и со стандартным набором GNU утилит, которые устанавливаются в ваше Unix-окружение по умолчанию. Но что делать, если этих возможностей вам недостаточно? Эту проблему можно решить путём установки дополнительных программ и утилит.

Концепция установки программ в Unix-окружение принципиально отличается от подхода, принятого в Windows-среде. Поэтому в этом коротком разделе мы рассмотрим, как правильно устанавливать и обновлять ПО в любом Unix-окружении или Linux дистрибутиве.

## Репозиторий

Ключевой концепцией установки ПО в Unix-окружении является [**репозиторий**](https://help.ubuntu.ru/wiki/репозиторий) (software repository). Репозиторием называется сервер-хранилище всех приложений, доступных в вашем Unix-окружении или Linux ОС.

Каждое приложение устанавливается из специального файла определённого формата. Эти форматы отличаются в разных Linux-дистрибутивах. Примеры форматов: deb, RPM, zst и т.д. Все программы хранятся в виде подобных файлов в репозитории. Каждый такой файл называется **пакетом** (package).

Кроме файлов с программами каждый репозиторий хранит **индекс пакетов**. Индекс пакетов представляет собой один или несколько файлов со списком всех программ, предоставляемых конкретным репозиторием.

Для установки программ в ваше Unix-окружение вы можете использовать один или несколько репозиториев.

## Работа с пакетами

Для работы с репозиторием в каждом Unix-окружении есть специальная программа под названием [**пакетный менеджер**](https://ru.wikipedia.org/wiki/Система_управления_пакетами) (package manager). Зачем понадобилась отдельная программа для установки нового ПО? Разве не удобнее вручную загружать и устанавливать пакеты из репозитория?

На самом деле основная задача пакетного менеджера заключается в отслеживании **зависимостей пакетов**. Зависимость пакетов возникает, когда программа из одного пакета использует возможности программы или библиотеки из другого. Этот механизм позволяет избежать многократной установки одного и того же приложения или библиотеки в систему. Вместо этого нужные пакеты устанавливаются однократно. Все зависящие от них программы знают место их расположения и используют их совместно.

Установка приложений в Unix-окружение или Linux ОС практически всегда должна выполняться через пакетный менеджер. Исключением являются проприетарные программы, которые обычно приходится устанавливать вручную.

Общий алгоритм установки пакета выглядит следующим образом:

1. Получить индекс пакетов от репозитория.

2. Найти нужное приложение или библиотеку в индексе пакетов.

3. Установить нужное приложение или библиотеку из репозитория.

В окружении MSYS2 используется пакетный менеджер [pacman](https://wiki.archlinux.org/index.php/Pacman_(Русский)) из дистрибутива Arch Linux. Поэтому рассмотрим установку пакетов на его примере.

Чтобы получить индекс пакетов, воспользуйтесь следующей командой:
{line-numbers: false, format: Bash}
```
pacman -Syy
```

Далее, чтобы найти пакет по ключевому, слову используйте команду:
{line-numbers: false, format: Bash}
```
pacman -Ss КЛЮЧЕВОЕ_СЛОВО
```

Предположим, что вы ищете утилиту для работы с документами MS Word. Тогда вы можете попробовать следующую команду:
{line-numbers: false, format: Bash}
```
pacman -Ss word
```

В списке результатов поиска будут два пакета: `mingw-w64-i686-antiword` и `mingw-w64-x86_64-antiword`. Это две сборки утилиты antiword для 32-разрядных и 64-разрядных систем. Утилита antiword позволяет конвертировать MS Word файлы в текстовый формат.

Чтобы установить найденное приложение, воспользуйтесь командой:
{line-numbers: false, format: Bash}
```
pacman -S ИМЯ_ПАКЕТА
```

Для нашего примера команда установки утилиты antiword будет выглядеть следующим образом:
{line-numbers: false, format: Bash}
```
pacman -S mingw-w64-x86_64-antiword
```

В результате этой команды будет установлена утилита antiword и все пакеты, которые необходимы для её работы.

После окончания процесса установки, вы можете запустить утилиту следующей командой:
{line-numbers: false, format: Bash}
```
antiword
```

Удалить ставший ненужным пакет вместе с его зависимостям, которые не нужны другим программам, можно следующей командой:
{line-numbers: false, format: Bash}
```
pacman -Rs ИМЯ_ПАКЕТА
```

Для удаления утилиты antiword команда будет выглядеть так:
{line-numbers: false, format: Bash}
```
pacman -Rs mingw-w64-x86_64-antiword
```

Чтобы обновить все установленные в систему пакеты и их зависимости до текущих версий в репозитории, используйте команду:
{line-numbers: false, format: Bash}
```
pacman -Syu
```

Мы рассмотрели основные команды пакетного менеджера pacman. Пакетные менеджеры разных Linux-дистрибутивов работают по одному и тому же принципу. Поэтому у каждой из рассмотренных нами команд есть альтернатива и в ОС Ubuntu с её пакетным менеджером apt-get, и в ОС Fedora с её yum. Информация по ним должна быть доступна в документации к вашему дистрибутиву.